"use strict";(self["webpackChunkmyblog"]=self["webpackChunkmyblog"]||[]).push([[243],{2243:function(s,a,t){t.r(a),t.d(a,{default:function(){return j}});var r=function(){var s=this,a=s._self._c;return a("div",[a("el-card",{staticStyle:{background:"rgba(255, 255, 255, 0.5)"}},[a("div",{staticClass:"markdown-body"},[a("blog-tags",{scopedSlots:s._u([{key:"footer",fn:function(){return[a("div",[s._v("test")]),a("button",[s._v("footer")])]},proxy:!0}])})],1)])],1)},e=[],n=function(){var s=this;s._self._c;return s._m(0)},l=[function(){var s=this,a=s._self._c;return a("article",[a("html",[a("head"),a("body",[a("hr"),a("p",[s._v("title: 10.5(受控非受控组件) categories: React tags:")]),a("ul",[a("li",[s._v("React")]),a("li",[s._v("笔记")])]),a("hr"),a("h2",[s._v("受控 & 非受控组件")]),a("p",[s._v("包含表单的组件分类：")]),a("ul",[a("li",[s._v("非受控组件：现用现取。即需要时使用，再获取节点得到数据")]),a("li",[s._v("受控组件：类似于Vue双向绑定的从视图层绑定到数据")])]),a("p",[s._v("尽量使用受控组件，因为非受控组件要使用大量的ref")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s._v("//非受控组件\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text/babel"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"language-javascript"}},[s._v("\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Demo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title class_ inherited__"}},[s._v("React.Component")]),s._v("{\n            handleSubmit = "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(")=>")]),s._v("{\n                event."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("preventDefault")]),s._v("();\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" {username,password} = "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("this")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("alert")]),s._v("(\n                    "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`您的用户名为"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${username.value}")]),s._v("，密码为"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${password.value}")]),s._v("`")]),s._v("\n                )\n            }\n            "),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("render")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v("){\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" (\n                    "),a("span",{pre:!0,attrs:{class:"language-xml"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onSubmit")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("this.handleSubmit")]),s._v(" }>")]),s._v("\n                            用户名："),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ref")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{c")]),s._v("=>")]),s._v("this.username=c} type=\"text\" name='username'/>"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("br")]),s._v("/>")]),s._v("    \n                            密码 ："),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ref")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{c")]),s._v("=>")]),s._v("this.password=c} type=\"password\" name='password'/>"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("br")]),s._v("/>")]),s._v("\n                            "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("button")]),s._v(">")]),s._v("登录"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("button")]),s._v(">")]),s._v("    \n                        "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("   \n                    "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")])]),s._v("\n                )\n            }\n        }\n        "),a("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("ReactDOM")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("render")]),s._v("( "),a("span",{pre:!0,attrs:{class:"language-xml"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("Demo")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("Demo")]),s._v(">")])]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("document")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("getElementById")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'test'")]),s._v(") )\n    ")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s._v("//受控组件\n        "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text/babel"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"language-javascript"}},[s._v("\n            "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Demo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title class_ inherited__"}},[s._v("React.Component")]),s._v("{\n                state = {\n                    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("password")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v("\n                }\n                saveUserName = "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(")=>")]),s._v(" {\n                    "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("this")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("setState")]),s._v("({"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(":event."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("target")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("value")]),s._v("})\n                }\n                savePassword = "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(")=>")]),s._v(" {\n                    "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("this")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("setState")]),s._v("({"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("password")]),s._v(":event."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("target")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("value")]),s._v("})\n                }\n                handleSubmit = "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(")=>")]),s._v(" {\n                    event."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("preventDefault")]),s._v("();\n                    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" {username,password} = "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("this")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("state")]),s._v(";\n                    "),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("alert")]),s._v("(\n                        "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`您的用户名为"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${ username }")]),s._v(",密码为"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${ password }")]),s._v("`")]),s._v("\n                    )\n                }\n                "),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("render")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v("){\n                    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" (\n                        "),a("span",{pre:!0,attrs:{class:"language-xml"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n                            "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onSubmit")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{this.handleSubmit}")]),s._v(">")]),s._v("\n                                "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onChange")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{this.saveUserName}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text"')]),s._v("/>")]),s._v("\n                                "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onChange")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{this.savePassword}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"password"')]),s._v("/>")]),s._v("\n                                "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("button")]),s._v(">")]),s._v("登录"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("button")]),s._v(">")]),s._v("    \n                            "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")])]),s._v("\n                    )\n                }\n            }\n            "),a("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("ReactDOM")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("render")]),s._v("("),a("span",{pre:!0,attrs:{class:"language-xml"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("Demo")]),s._v("/>")])]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("document")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("getElementById")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'test'")]),s._v("))\n        ")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),a("h2",[s._v("高阶函数_函数柯里化")]),a("p",[s._v("对上述受控组件代码进行优化，希望把"),a("code",{pre:!0},[s._v("saveUserName")]),s._v("和"),a("code",{pre:!0},[s._v("savePassword")]),s._v("合并为一个函数 要点：")]),a("ul",[a("li",[s._v("高阶函数：参数为函数或者返回一个函数的函数，如"),a("code",{pre:!0},[s._v("Promise、setTimeout、Array.map()")])]),a("li",[s._v("函数柯里化：通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式")])]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s._v("//函数柯里化\nfunction sum(a){\n    return (b)=>{\n        return (c){\n            return a + b + c;\n        }\n    }\n}\n")])]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s._v("//使用高阶函数和函数柯里化\n    "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text/babel"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"language-javascript"}},[s._v("\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Demo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title class_ inherited__"}},[s._v("React.Component")]),s._v("{\n            state = {\n                "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("password")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v("\n            }\n            saveFormData = "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("dataType")]),s._v(")=>")]),s._v("{\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(")=>")]),s._v("{\n                    "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("this")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("setState")]),s._v("({[dataType]:event."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("target")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("value")]),s._v("})\n                }\n            }\n            handleSubmit = "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(")=>")]),s._v(" {\n                event."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("preventDefault")]),s._v("();\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" {username,password} = "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("this")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("state")]),s._v(";\n                "),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("alert")]),s._v("(\n                    "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`您的用户名为"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${ username }")]),s._v(",密码为"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${ password }")]),s._v("`")]),s._v("\n                )\n            }\n            "),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("render")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v("){\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" (\n                    "),a("span",{pre:!0,attrs:{class:"language-xml"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onSubmit")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{this.handleSubmit}")]),s._v(">")]),s._v("\n                            "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onChange")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{this.saveFormData(")]),s._v("'"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("username")]),s._v("')} "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text"')]),s._v("/>")]),s._v("\n                            "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onChange")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{this.saveFormData(")]),s._v("'"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("password")]),s._v("')} "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"password"')]),s._v("/>")]),s._v("\n                            "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("button")]),s._v(">")]),s._v("登录"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("button")]),s._v(">")]),s._v("    \n                        "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")])]),s._v("\n                )\n                }\n            }\n        "),a("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("ReactDOM")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("render")]),s._v("("),a("span",{pre:!0,attrs:{class:"language-xml"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("Demo")]),s._v("/>")])]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("document")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("getElementById")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'test'")]),s._v("))\n    ")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s._v("//不使用柯里化写法\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text/babel"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"language-javascript"}},[s._v("\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Demo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title class_ inherited__"}},[s._v("React.Component")]),s._v("{\n            state = {\n                "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("password")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v("\n            }\n            saveFormData = "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("dataType,event")]),s._v(")=>")]),s._v("{\n                "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("this")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("setState")]),s._v("({[dataType]:event."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("target")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("value")]),s._v("})\n            }\n            handleSubmit = "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(")=>")]),s._v(" {\n                event."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("preventDefault")]),s._v("();\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" {username,password} = "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("this")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("state")]),s._v(";\n                "),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("alert")]),s._v("(\n                    "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`您的用户名为"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${ username }")]),s._v(",密码为"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${ password }")]),s._v("`")]),s._v("\n                )\n            }\n            "),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("render")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v("){\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" (\n                    "),a("span",{pre:!0,attrs:{class:"language-xml"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onSubmit")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{this.handleSubmit}")]),s._v(">")]),s._v("\n                            "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onChange")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{event")]),s._v("=>")]),s._v("this.saveFormData('username',event)} type=\"text\"/>\n                            "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("onChange")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("{event")]),s._v("=>")]),s._v("this.saveFormData('password',event)} type=\"password\"/>\n                            "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("button")]),s._v(">")]),s._v("登录"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("button")]),s._v(">")]),s._v("    \n                        "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")])]),s._v("\n                )\n                }\n            }\n        "),a("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("ReactDOM")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("render")]),s._v("("),a("span",{pre:!0,attrs:{class:"language-xml"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("Demo")]),s._v("/>")])]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("document")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("getElementById")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'test'")]),s._v("))\n    ")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),a("h2",[a("strong",[s._v("生命周期")])]),a("h3",[a("strong",[s._v("生命周期旧版")])]),a("p",[a("strong",[s._v("初始化阶段：")]),a("code",{pre:!0},[s._v("ReactDOM.render()")]),s._v("触发的初次渲染")]),a("ul",[a("li",[a("code",{pre:!0},[s._v("constructor")])]),a("li",[a("code",{pre:!0},[s._v("componentWillMount")])]),a("li",[a("code",{pre:!0},[s._v("render")])]),a("li",[a("code",{pre:!0},[s._v("componentDidMount")]),s._v(" ===> 常用 一般在这个钩子中做一些初始化的事：如：开启定时器，发送网络请求，订阅消息")])]),a("p",[a("strong",[s._v("更新阶段：")])]),a("p",[s._v("1.父组件重新"),a("code",{pre:!0},[s._v("render")]),s._v("触发的更新")]),a("ul",[a("li",[a("code",{pre:!0},[s._v("componentWillReceiveProps")])]),a("li",[a("code",{pre:!0},[s._v("shouldComponentUpdate")]),s._v(" ：控制组件是否更新的阀门，返回值为布尔值，默认为"),a("code",{pre:!0},[s._v("true")]),s._v("。若返回 "),a("code",{pre:!0},[s._v("false")]),s._v(" ，则后续流程不会进行。")]),a("li",[a("code",{pre:!0},[s._v("componentWillUpdate")])]),a("li",[a("code",{pre:!0},[s._v("render")])]),a("li",[a("code",{pre:!0},[s._v("componentDidUpdate")])])]),a("p",[s._v("2.组件内部调用"),a("code",{pre:!0},[s._v("this.setState()")]),s._v("修改状态")]),a("ul",[a("li",[a("code",{pre:!0},[s._v("shouldComponentUpdate")])]),a("li",[a("code",{pre:!0},[s._v("componentWillUpdate")])]),a("li",[a("code",{pre:!0},[s._v("render")])]),a("li",[a("code",{pre:!0},[s._v("componentDidUpdate")])])]),a("p",[s._v("3.组件内部调用"),a("code",{pre:!0},[s._v("this.forceUpdate()")]),s._v("强制更新")]),a("ul",[a("li",[a("code",{pre:!0},[s._v("componentWillUpdate")])]),a("li",[a("code",{pre:!0},[s._v("render")])]),a("li",[a("code",{pre:!0},[s._v("componentDidUpdate")]),s._v(" ===> 常用 一般在这个钩子里做一些收尾的事，例如：关闭定时器，取消订阅消息")])]),a("p",[a("strong",[s._v("卸载阶段")]),s._v(":"),a("code",{pre:!0},[s._v("ReactDOM.unmountComponentAtNode()")]),s._v("触发")]),a("ul",[a("li",[a("code",{pre:!0},[s._v("componentWillUnmount")])])]),a("p",[a("img",{attrs:{src:"https://brucecai55520.gitee.io/bruceblog/assets/img/react-lifecyle-old.5c4592bd.png",alt:"图像"}})]),a("h3",[a("strong",[s._v("生命周期新版")])]),a("h3",[a("strong",[s._v("更改内容")])]),a("ul",[a("li",[s._v("废弃三个钩子："),a("code",{pre:!0},[s._v("componentWillMount")]),s._v("、"),a("code",{pre:!0},[s._v("componentWillReceiveProps")]),s._v("、"),a("code",{pre:!0},[s._v("componentWillUpdate")]),s._v("。在新版本中这三个钩子需要加"),a("code",{pre:!0},[s._v("UNSAFE_")]),s._v("前缀，后续可能会废弃")]),a("li",[s._v("新增两个钩子（实际场景用的很少）："),a("code",{pre:!0},[s._v("getDerivedStateFromProps")]),s._v("、"),a("code",{pre:!0},[s._v("getSnapshotBeforeUpdate")])])]),a("p",[a("img",{attrs:{src:"https://brucecai55520.gitee.io/bruceblog/assets/img/react-lifecycle-new.7009279b.png",alt:"图像"}})]),a("h4",[a("strong",[s._v("static getDerivedStateFromProps(props, state)：")])]),a("ul",[a("li",[s._v("需使用 "),a("code",{pre:!0},[s._v("static")]),s._v(" 修饰")]),a("li",[s._v("需返回一个对象更新 "),a("code",{pre:!0},[s._v("state")]),s._v("或返回 "),a("code",{pre:!0},[s._v("null")])]),a("li",[s._v("适用于如下情况："),a("code",{pre:!0},[s._v("state")]),s._v(" 的值任何时候都取决于"),a("code",{pre:!0},[s._v("prop")])])]),a("h4",[a("strong",[s._v("getSnapshotBeforeUpdate(prevProps, prevState)：")])]),a("ul",[a("li",[s._v("在组件更新之前获取快照")]),a("li",[s._v("得组件能在发生更改之前从 "),a("code",{pre:!0},[s._v("DOM")]),s._v("中捕获一些信息（如滚动位置）")]),a("li",[s._v("返回值将作为参数传递给 "),a("code",{pre:!0},[s._v("componentDidUpdate()")])])]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("getDerivedStateFromProps")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("props,state")]),s._v("){\n  "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'getDerivedStateFromProps'")]),s._v(",props,state);\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v("\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("getSnapshotBeforeUpdate")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v("){\n  "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'getSnapshotBeforeUpdate'")]),s._v(");\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'atguigu'")]),s._v("\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("componentDidUpdate")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("preProps,preState,snapshotValue")]),s._v("){\n  "),a("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),a("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'componentDidUpdate'")]),s._v(",preProps,preState,snapshotValue);\n}\n")])]),a("h4",[a("strong",[s._v("最重要的三个钩子")])]),a("ul",[a("li",[s._v("render ：初始化渲染和更新渲染")]),a("li",[s._v("componentDidMount ：进行初始化，如开启定时器、发送网络请求、订阅消息")]),a("li",[s._v("componentWillUnmount ：进行收尾，如关闭定时器、取消订阅消息")])]),a("h2",[s._v("虚拟 DOM 与 Diff 算法")]),a("p",[a("img",{attrs:{src:"https://brucecai55520.gitee.io/bruceblog/assets/img/Diff.ae9f4adc.png",alt:"图像"}})]),a("h2",[a("code",{pre:!0},[s._v("key")]),a("strong",[s._v("的作用")])]),a("p",[a("code",{pre:!0},[s._v("key")]),s._v(" 是虚拟 DOM 对象的标识，可提高页面更新渲染的效率。")]),a("p",[s._v("当状态中的数据发生变化时，React 会根据新数据生成新的虚拟 DOM ，接着对新旧虚拟 DOM 进行 Diff 比较，规则如下：")]),a("ul",[a("li",[s._v("旧虚拟 DOM 找到和新虚拟 DOM 相同的 key： "),a("ul",[a("li",[s._v("若内容没变，直接复用真实 DOM")]),a("li",[s._v("若内容改变，则生成新的真实 DOM ，替换页面中之前的真实 DOM")])])]),a("li",[s._v("旧虚拟 DOM 未找到和新虚拟 DOM 相同的 key：根据数据创建新的真实 DOM ，渲染到页面")])]),a("h2",[a("strong",[s._v("使用 "),a("code",{pre:!0},[s._v("index")]),s._v(" 作为 "),a("code",{pre:!0},[s._v("key")]),s._v(" 可能引发的问题：")])]),a("ul",[a("li",[s._v("若对数据进行逆序添加、逆序删除等破坏顺序的操作，会进行没有必要的真实 DOM 更新。界面效果没问题，但效率低下。")]),a("li",[s._v("如果结构中包含输入类的 DOM（如 input 输入框） ，则会产生错误的 DOM 更新。")]),a("li",[s._v("若不存在对数据逆序添加、逆序删除等破坏顺序的操作，则没有问题。")])])])])])}],p=t(3736),v={},_=(0,p.Z)(v,n,l,!1,null,null,null),c=_.exports,h={name:"tags-blog",components:{blogTags:c},data(){return{}},mounted(){},methods:{}},o=h,i=(0,p.Z)(o,r,e,!1,null,"26d66fbe",null),j=i.exports}}]);
//# sourceMappingURL=243.b4844116.js.map